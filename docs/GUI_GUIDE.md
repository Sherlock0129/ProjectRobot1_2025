# GUI界面使用指南

## 启动GUI

运行以下命令启动图形界面：

```bash
python main_gui.py
```

## 主界面

启动后会显示主界面，包含四个主要功能按钮：

1. **处理销售** (绿色按钮) - 打开销售窗口
2. **处理退货** (红色按钮) - 打开退货窗口
3. **商品列表** (蓝色按钮) - 查看所有商品
4. **历史记录** (紫色按钮) - 查看销售和退货历史

## 处理销售流程

### 1. 打开销售窗口
点击主界面的"处理销售"按钮，会打开一个新的销售窗口。

### 2. 添加商品
- 在"商品ID"下拉框中选择要销售的商品
- 在"数量"输入框中输入购买数量
- 点击"添加商品"按钮

### 3. 查看销售单
右侧会实时显示：
- 已添加的商品列表
- 每个商品的单价和小计
- 销售单总计金额

### 4. 完成销售
- 点击"完成销售"按钮
- 在弹出的支付对话框中：
  - 选择支付方式（现金/刷卡/移动支付）
  - 输入支付金额
  - 点击"确认支付"
- 系统会自动计算找零并显示收据信息

### 5. 取消销售
如果不想完成本次销售，可以点击"取消销售"按钮，系统会恢复库存。

## 处理退货流程

### 1. 打开退货窗口
点击主界面的"处理退货"按钮，会打开一个新的退货窗口。

### 2. 输入原始销售单（可选）
- 系统会提示输入原始销售单ID
- 可以直接取消跳过此步骤

### 3. 添加退货商品
- 在"商品ID"下拉框中选择要退货的商品
- 在"退货数量"输入框中输入退货数量
- 点击"添加退货商品"按钮

### 4. 查看退货单
右侧会实时显示：
- 已添加的退货商品列表
- 每个商品的单价和小计
- 退货单退款总额

### 5. 完成退货
- 点击"完成退货"按钮
- 确认后系统会：
  - 恢复商品库存
  - 计算退款总额
  - 保存退货记录

### 6. 取消退货
如果不想完成本次退货，可以点击"取消退货"按钮。

## 查看商品列表

点击主界面的"商品列表"按钮，会打开一个窗口显示所有商品信息：

- 商品ID
- 商品名称
- 单价
- 当前库存

## 查看历史记录

点击主界面的"历史记录"按钮，会打开一个包含两个标签页的窗口：

### 销售历史标签页
显示所有已完成的销售记录：
- 销售单号
- 销售时间
- 商品数量
- 总金额
- 支付方式

### 退货历史标签页
显示所有已完成的退货记录：
- 退货单号
- 原始销售单号
- 退货时间
- 商品数量
- 退款金额

## 界面特点

### 颜色方案
- **绿色**: 销售相关功能
- **红色**: 退货相关功能
- **蓝色**: 商品管理功能
- **紫色**: 历史记录功能
- **灰色**: 取消/关闭操作

### 交互提示
- 操作成功会显示绿色成功提示
- 操作失败会显示红色错误提示
- 需要确认的操作会弹出确认对话框
- 状态栏会显示当前操作状态

### 窗口特性
- 所有功能窗口都是模态窗口，确保操作流程清晰
- 支持窗口关闭和取消操作
- 实时更新显示内容

## 快捷键提示

虽然GUI主要使用鼠标操作，但以下操作可以使用键盘：

- **Tab键**: 在输入框之间切换焦点
- **Enter键**: 在输入框中按Enter可以快速确认（部分功能）
- **Esc键**: 关闭当前窗口（部分窗口支持）

## 注意事项

1. **库存检查**: 添加商品时会自动检查库存，库存不足会提示错误
2. **支付金额**: 支付金额必须大于等于应付金额
3. **数据持久化**: 当前版本数据存储在内存中，关闭程序后数据会丢失
4. **窗口管理**: 建议一次只打开一个功能窗口，避免界面混乱

## 故障排除

### 问题：窗口无法打开
- 检查Python版本是否支持Tkinter
- 尝试运行 `python -m tkinter` 测试Tkinter是否可用

### 问题：中文显示乱码
- 确保系统支持中文字体
- Windows系统通常会自动处理

### 问题：界面显示不正常
- 尝试调整窗口大小
- 检查系统显示设置

## 技术说明

- **GUI框架**: Tkinter（Python标准库）
- **界面风格**: 现代化扁平设计
- **响应式**: 支持窗口大小调整
- **兼容性**: 支持Windows、Linux、macOS

