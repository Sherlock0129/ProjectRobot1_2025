# 用例模型 - 详细用例文本 (Fully Dressed Use Case)

## 用例1：处理销售 (Process Sale)

### 基本信息
- **用例ID**: UC-001
- **用例名称**: 处理销售
- **主要参与者**: 收银员 (Cashier)
- **次要参与者**: 顾客 (Customer)
- **优先级**: 高
- **前置条件**: 
  - 系统已启动并正常运行
  - 收银员已登录系统
  - 商品库存数据已初始化

### 主要成功场景 (Main Success Scenario)

1. 收银员选择"处理销售"功能
2. 系统创建新的销售单（自动生成销售ID）
3. **重复以下步骤直到收银员选择完成销售：**
   3.1. 收银员输入商品ID和数量
   3.2. 系统验证商品是否存在
   3.3. 系统验证库存是否充足
   3.4. 系统将商品添加到销售单
   3.5. 系统减少商品库存
   3.6. 系统计算并显示当前总金额
4. 收银员选择"完成销售"
5. 系统显示销售总金额
6. 收银员输入支付方式和支付金额
7. 系统验证支付金额是否足够
8. 系统计算找零（如果支付方式为现金）
9. 系统保存销售记录
10. 系统生成并显示收据
11. 用例结束

### 扩展场景 (Extensions)

**3.2a. 商品不存在**
- 系统显示错误消息："商品不存在"
- 返回步骤3.1

**3.3a. 库存不足**
- 系统显示错误消息："库存不足，当前库存：[库存数量]"
- 返回步骤3.1

**7a. 支付金额不足**
- 系统显示错误消息："支付金额不足，还需：[差额]"
- 返回步骤6

**4a. 销售单为空**
- 系统显示提示消息："销售单为空，无法完成销售"
- 返回步骤3.1

### 后置条件
- 销售记录已保存
- 商品库存已更新
- 销售单状态为"已完成"

### 特殊需求
- 系统应实时显示销售单明细
- 系统应自动计算总金额
- 支持多种支付方式：现金、刷卡、移动支付
- 现金支付时自动计算找零

### 业务规则
- 销售数量不能超过库存数量
- 支付金额必须大于等于销售总金额
- 销售单一旦完成不能修改

---

## 用例2：处理退货 (Handle Returns)

### 基本信息
- **用例ID**: UC-002
- **用例名称**: 处理退货
- **主要参与者**: 收银员 (Cashier)
- **次要参与者**: 顾客 (Customer)
- **优先级**: 高
- **前置条件**: 
  - 系统已启动并正常运行
  - 收银员已登录系统
  - 商品库存数据已初始化

### 主要成功场景 (Main Success Scenario)

1. 收银员选择"处理退货"功能
2. 系统提示输入原始销售单ID（可选）
3. 系统创建新的退货单（自动生成退货ID）
4. **重复以下步骤直到收银员选择完成退货：**
   4.1. 收银员输入商品ID和退货数量
   4.2. 系统验证商品是否存在
   4.3. 系统将商品添加到退货单
   4.4. 系统计算并显示当前退款总金额
5. 收银员选择"完成退货"
6. 系统验证退货单不为空
7. 系统恢复商品库存
8. 系统保存退货记录
9. 系统显示退货确认信息（退货ID、退款总金额）
10. 用例结束

### 扩展场景 (Extensions)

**4.2a. 商品不存在**
- 系统显示错误消息："商品不存在"
- 返回步骤4.1

**6a. 退货单为空**
- 系统显示提示消息："退货单为空，无法完成退货"
- 返回步骤4.1

### 后置条件
- 退货记录已保存
- 商品库存已恢复
- 退货单状态为"已完成"

### 特殊需求
- 系统应实时显示退货单明细
- 系统应自动计算退款总金额
- 可关联原始销售单（可选功能）

### 业务规则
- 退货单一旦完成不能修改
- 退货后商品库存增加

---

## 用例3：查看商品列表 (View Product List)

### 基本信息
- **用例ID**: UC-003
- **用例名称**: 查看商品列表
- **主要参与者**: 收银员 (Cashier)
- **优先级**: 中
- **前置条件**: 
  - 系统已启动并正常运行
  - 商品数据已初始化

### 主要成功场景

1. 收银员选择"查看商品列表"功能
2. 系统检索所有商品信息
3. 系统以表格形式显示商品列表（商品ID、名称、单价、库存）
4. 收银员查看商品信息
5. 用例结束

### 特殊需求
- 商品列表应按商品ID排序
- 显示格式应清晰易读

---

## 用例4：查看销售历史 (View Sales History)

### 基本信息
- **用例ID**: UC-004
- **用例名称**: 查看销售历史
- **主要参与者**: 收银员 (Cashier)
- **优先级**: 中
- **前置条件**: 
  - 系统已启动并正常运行
  - 至少存在一条销售记录

### 主要成功场景

1. 收银员选择"查看销售历史"功能
2. 系统检索所有销售记录
3. 系统显示销售历史列表（销售ID、销售时间、商品明细、总金额、支付方式）
4. 收银员查看销售记录
5. 用例结束

### 特殊需求
- 销售记录应按时间倒序排列（最新的在前）
- 显示格式应清晰易读

---

## 用例5：查看退货历史 (View Return History)

### 基本信息
- **用例ID**: UC-005
- **用例名称**: 查看退货历史
- **主要参与者**: 收银员 (Cashier)
- **优先级**: 中
- **前置条件**: 
  - 系统已启动并正常运行
  - 至少存在一条退货记录

### 主要成功场景

1. 收银员选择"查看退货历史"功能
2. 系统检索所有退货记录
3. 系统显示退货历史列表（退货ID、退货时间、商品明细、退款总金额、关联销售ID）
4. 收银员查看退货记录
5. 用例结束

### 特殊需求
- 退货记录应按时间倒序排列（最新的在前）
- 显示格式应清晰易读

